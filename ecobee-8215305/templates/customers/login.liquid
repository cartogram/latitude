{% comment %}

This template will be automatically generated for you if the file doesn't exist,
but where's the fun in having no control? Define your layout below.

The 'layout settings.customer_layout' line is inserted at the top of every customer account template.
Your theme's settings determine to use the 'default' or 'theme' customer templates.
More info:
- http://www.tetchi.ca/shopify-theme-from-scratch-part-11/

Template note:
- All IDs on this template are required to make the forms submit properly
- There are two instances of inline JS below. Best practices advise separating this
into an external JS file.

{% endcomment %}

{% layout settings.customer_layout %}

<section class="section--account">

    <div class="grid">

        <div class="grid__item lap-and-up-one-third push--lap-and-up-one-third">


                    {% comment %}
                    If a user has successfully requested a new password, the form.posted_successfully? variable
                    is set to true within the 'recover_customer_password' form only. Within that form you'll see
                    us assign a variable 'reset_success' to true, which is used in JS to show our success message.
                    {% endcomment %}

                    <div class="note form-success" id="resetSuccess" style="display:none;">
                        We've sent you an email with a link to update your password.
                    </div>

                {% comment %}
                This form must use 'customer_login'
                {% endcomment %}

                {% form 'customer_login' %}

                <fieldset>
                    <hgroup>
                        <h1 class="hN">Login</h1>
                    </hgroup>


                    {% include 'form-errors-custom' %}
                    <ul class="form-fields">
                        <li class="{% if form.errors contains 'email' %}has-error{% endif %}" >
                            <label for="customer_email" class="hidden-label form__label ">email address</label>
                            <input type="email" value="" name="customer[email]" id="customer_email" placeholder="Email" autocorrect="off" autocapitalize="off" autofocus>
                        </li>

                        {% if form.password_needed %}
                        <li class="{% if form.errors contains 'password' %}has-error{% endif %}" >
                            <label for="customer_password" class="hidden-label form__label ">Password</label>

                            <input type="password" value="" name="customer[password]" id="customer_password" placeholder="Password" >
                            <a href="#" onclick="showRecoverPasswordForm();return false;" class="additional over-top">Forgot?</a>
                        </li>
                        {% endif %}
                        <li class="one-half inline">
                            <a class="action" href="{{ shop.url }}">Return to Store</a>
                        </li><li class="one-half inline">
                            <input type="submit" class="btn btn--primary" value="Sign In">
                        </li>

                    </ul>
            </fieldset>

            {% endform %}


            {% comment %}
            This page uses JavaScript to show/hide the recover password form
            {% endcomment %}
            <div id="recover_password" style="display: none;">

                <hgroup>
                    <h1 class="hN">Reset your password</h1>
                    <h2 class="hN">We will send you an email to reset your password.</h2>

                </hgroup>
                {% comment %}
                This form must use 'recover_customer_password'
                {% endcomment %}
                {% form 'recover_customer_password' %}

                {% include 'form-errors-custom' %}

                {% comment %}
                form.posted_successfully? is true only inside this form, but we want
                to show a success message outside of it. To do so, set the variable
                reset_success to true, then use JS to show our success message above.
                {% endcomment %}
                {% if form.posted_successfully? %}
                {% assign reset_success = true %}
                {% endif %}
                <fieldset>
                    <ul class="form-fields">
                        <li>
                            <label for="recover-email" class="hidden-label epsilon">Email</label>
                            <input type="email" value="" name="email" id="recover-email" placeholder="Email" autocorrect="off" autocapitalize="off">
                        </li>



                        <li class="one-half inline">
                            <a href="#" class="action" onclick="hideRecoverPasswordForm();return false;">Cancel</a>
                        </li><li class="one-half inline">
                            <input type="submit" class="btn btn--primary" value="Submit">
                        </li>
                    </ul>
                </fieldset>




                {% endform %}


                {% comment %}
                If accounts are set as optional, the following will be shown as an option
                during checkout, not on the default /login page.
                {% endcomment %}
                {% if shop.checkout.guest_login %}

                <hr>

                <h2>Continue as a guest</h2>

                {% form 'guest_login' %}
                <input  type="submit" class="btn" value="Let's go">
                {% endform %}
                {% endif %}

            </div>

        </div>
    </div>
</div>

</section>


<script>
/*
Show/hide the recover password form when requested.
I'd suggest using some CSS3 transitions to make this change look cool,
but this gets the job done for now.
*/
function showRecoverPasswordForm() {
    document.getElementById('recover_password').style.display = 'block';
    document.getElementById('customer_login').style.display='none';
}

function hideRecoverPasswordForm() {
    document.getElementById('recover_password').style.display = 'none';
    document.getElementById('customer_login').style.display = 'block';
}

// Allow deep linking to the recover password form
if (window.location.hash == '#recover') { showRecoverPasswordForm() }

    // reset_success is only true when the reset form is
    {% if reset_success %}
    document.getElementById('resetSuccess').style.display = 'block';
    {% endif %}
    </script>
